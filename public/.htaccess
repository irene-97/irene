<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 1 seconds"
    ExpiresByType text/html "access plus 1 seconds"
    ExpiresByType image/x-icon "access plus 2592000 seconds"
    ExpiresByType image/gif "access plus 2592000 seconds"
    ExpiresByType image/jpeg "access plus 2592000 seconds"
    ExpiresByType image/png "access plus 2592000 seconds"
    ExpiresByType image/svg+xml "access plus 2592000 seconds"
    ExpiresByType text/css "access plus 604800 seconds"
    ExpiresByType text/javascript "access plus 86400 seconds"
    ExpiresByType application/x-javascript "access plus 86400 seconds"
</IfModule>

<FilesMatch "\.(ico|pdf|jpg|jpeg|png|gif|html|htm|xml|txt|xsl|svg)$">
    Header set Cache-Control "max-age=31536050"
</FilesMatch>

<IfModule mod_expires.c>
    # Turn on Expires and set default to 0
    ExpiresActive On
    ExpiresDefault A0
</IfModule>

# Set up caching on media files for 1 year (forever?)
<FilesMatch "\.(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv|wav)$">
    <IfModule mod_expires.c>
        ExpiresDefault A29030400
    </IfModule>
    Header append Cache-Control "public"
</FilesMatch>

# Set up caching on media files for 1 week
<FilesMatch "\.(gif|jpg|jpeg|png|swf)$">
    <IfModule mod_expires.c>
        ExpiresDefault A604800
    </IfModule>
    Header append Cache-Control "public"
</FilesMatch>

# Set up 2 Hour caching on commonly updated files
<FilesMatch "\.(xml|txt|js|css)$">
    <IfModule mod_expires.c>
        ExpiresDefault A604800
    </IfModule>
    Header append Cache-Control "proxy-revalidate"
</FilesMatch>

<FilesMatch "\.(js|css|xml|gz)$">
    Header append Vary Accept-Encoding
</FilesMatch>

# Force no caching for dynamic files
<FilesMatch "\.(php|cgi|pl|htm)$">
    <IfModule mod_expires.c>
        ExpiresActive Off
    </IfModule>
    Header set Cache-Control "private, no-cache, no-store, proxy-revalidate, no-transform"
    Header set Pragma "no-cache"
</FilesMatch>

AddEncoding gzip .gz
<Files *.css.gz>
    ForceType text/css
</Files>
<Files *.js.gz>
    ForceType text/javascript
</Files>
#<FilesMatch .*\.(js|css)>
#  RewriteEngine On
#  RewriteCond %{HTTP_USER_AGENT} !MSIE
#  RewriteCond %{HTTP:Accept-encoding} gzip
#  RewriteCond %{REQUEST_FILENAME}.gz -f
#  RewriteRule ^(.*)$ $1.gz [L]
#</FilesMatch>
